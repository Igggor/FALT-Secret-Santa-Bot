# Тайный Санта — Telegram бот (Python)

Коротко: бот позволяет пользователям зарегистрироваться на участие в Тайном Санте, сохраняет данные в JSON и автоматически распределяет участников в указанный день.

Требования:
- Python 3.10+
- Установить зависимости:

```bash
python -m pip install -r requirements.txt
```

Переменные окружения:
- `TELEGRAM_TOKEN` — токен бота (обязательно)
- `DISTRIBUTION_DATETIME` — дата и время распределения в формате ISO `YYYY-MM-DDTHH:MM:SS` или `YYYY-MM-DD HH:MM`. Если не указано, распределение не запланируется автоматически.
- `ADMIN_IDS` — (опционально) список admin Telegram id через запятую, например `ADMIN_IDS=1376530078,123456789`.

Использование `.env`:
Создайте файл `.env` в корне проекта и поместите туда значения переменных окружения. Пример (`.env`):

```env
TELEGRAM_TOKEN=ваш_токен_бота
DISTRIBUTION_DATETIME=2025-12-25T12:00:00
```

Пример добавления админов в `.env`:

```env
ADMIN_IDS=1376530078,123456789
```

Также добавлен файл `.env.example` с примером содержимого.

Запуск:

```bash
export TELEGRAM_TOKEN="ваш_токен"
export DISTRIBUTION_DATETIME="2025-12-25T12:00:00"
python bot.py
```

Файлы данных:
- `data/users.json` — все зарегистрированные участники (ключи — telegram id)
- `data/assignments.json` — результат последнего распределения (giver_id -> receiver_id)

Как это работает (кратко):
- /start — проверяет, зарегистрирован ли пользователь; если нет — запускает диалог для сбора ФИО, телефона, курса, группы, комнаты и пожеланий.
- В день распределения бот автоматически выполнит дерэнгемент (никто не дарит сам себе) и отправит каждому участнику информацию о том, кому он должен дарить подарок.

Вы можете изменить placeholder-тексты в `bot.py` (сообщения при повторной регистрации и подтверждение регистрации).
